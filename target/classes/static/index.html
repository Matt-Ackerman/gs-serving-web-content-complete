<!DOCTYPE HTML>
<html xmlns:form="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="/style.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lora" rel="stylesheet">
<link rel="stylesheet"href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/app.js"></script>
<script>
	// When the page is opened
	$(document).ready(function() {

		// When you click the get poem button
		$('#getPoem').on('click touchstart', function() {
			
	        $(".mini-loader-content").show().css('display', 'flex');
	        $('html,body').animate({scrollTop: $("#mini-loader").offset().top}, 'slow');

			// Trigger the spring boot controller and go to display() function with result
			$.ajax({
				url : "get-poem.html",
				data : {
					'sentence' : null
				},
				success : function(data) {
					addLineToTable(data);
				}
			});

		});
		
/* 		var infoIsShowing = false;
		$('#getInfo').on('click touchstart', function() {
	        if (infoIsShowing) {
	        	$("#orange-bar").hide('slow');
	        	infoIsShowing = false;
	        } else {
	        	$("#orange-bar").show('slow').css('display', 'flex');
	        	infoIsShowing = true;
	        }
		}); */

	});

	var i = 0;

	// This is triggered by response from spring boot
	function addLineToTable(data) {

		i++;

		if (i == 9) {
	        $(".mini-loader-content").hide();
			return false;
		}

		var json = JSON.parse(data);

		document.getElementById('title' + i).innerHTML = json.title + ' - ' + json.author;
		document.getElementById('sentence' + i).innerHTML = json.sentence + ',';

		if (i % 2 != 0) {
			$.ajax({
				url : "get-poem.html",
				data : {
					'sentence' : json.sentence
				},
				success : function(data) {
					addLineToTable(data);
				}
			});
		} else {
			$.ajax({
				url : "get-poem.html",
				data : {
					'sentence' : null
				},
				success : function(data) {
					addLineToTable(data);
				}
			});
		}

	}
	
</script>

</head>
<body>

	<div id="header-background">
		<div id="header">
			<img src="https://melbournechapter.net/images/autumn-clipart-6.png"
				width="80" height="100">poetryscript</div>

		<div id="header2">discover beauty through chance.</div>
	</div>

	<div id="orange-bar">
		the poetryscript project scans thousands of
		books from gutenberg.com to produce to produce rhyming schemes that
		follow conventional poetry standards.
	</div>

	<div class="buttons">
		<button class="button" id="getPoem" type="submit">discover</button>
		<!-- <button class="button" id="getInfo" type="submit">about</button> -->
	</div>

	<div class="mini-loader-content">
		<svg id="mini-loader" xmlns="http://www.w3.org/2000/svg" width="50"
			height="50" viewBox="0 0 500.00001 500.00001">
            <g>
                <path id="b0"
				d="M66.734 66.734v366.533h366.532V66.734H66.734zm15 15h336.532v336.533H81.734V81.734z">
                </path>
                <path id="b2"
				d="M354.16 2.5v143.34H497.5V2.5H354.16zm10 10H487.5v123.34H364.16V12.5z">
                </path>
                <path id="b1"
				d="M0 2.5v143.34h143.34V2.5H0zm10 10h123.34v123.34H10V12.5z">
                </path>
                <path id="b3"
				d="M354.16 356.66V500H497.5V356.66H354.16zm10 10H487.5V490H364.16V366.66z">
                </path>
                <path id="b4"
				d="M0 356.66V500h143.34V356.66H0zm10 10h123.34V490H10V366.66z">
                </path>
            </g>
        </svg>
	</div>

	<div class="center-lists">
		<div class="bothlists">
			<div class="list">
				<div id="sentence">
					<ul>
						<li><div id="sentence1"></div></li>
						<li><div id="sentence2"></div></li>
						<li><div id="sentence3"></div></li>
						<li><div id="sentence4"></div></li>
						<li><div id="sentence5"></div></li>
						<li><div id="sentence6"></div></li>
						<li><div id="sentence7"></div></li>
						<li><div id="sentence8"></div></li>
					</ul>
				</div>
			</div>
			<div class="list">
				<div id="titleAndAuthor">
					<ul>
						<li class="extraspace"><div id="title1"></div></li>
						<li class="extraspace"><div id="title2"></div></li>
						<li class="extraspace"><div id="title3"></div></li>
						<li class="extraspace"><div id="title4"></div></li>
						<li class="extraspace"><div id="title5"></div></li>
						<li class="extraspace"><div id="title6"></div></li>
						<li class="extraspace"><div id="title7"></div></li>
						<li class="extraspace"><div id="title8"></div></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
